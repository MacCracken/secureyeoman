# Default values for friday (development)

nameOverride: ""
fullnameOverride: ""
namespace: ""

image:
  core:
    repository: ghcr.io/maccracken/secureyeoman-core
    tag: ""  # defaults to Chart.appVersion
    pullPolicy: IfNotPresent
  mcp:
    repository: ghcr.io/maccracken/secureyeoman-mcp
    tag: ""
    pullPolicy: IfNotPresent
  dashboard:
    repository: ghcr.io/maccracken/secureyeoman-dashboard
    tag: ""
    pullPolicy: IfNotPresent

imagePullSecrets: []

serviceAccount:
  create: true
  name: ""
  annotations: {}

# -- Core service (gateway + agent engine)
core:
  replicaCount: 1
  port: 18789
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: "1"
      memory: 1Gi
  nodeSelector: {}
  tolerations: []
  affinity: {}
  podAnnotations: {}
  env: {}

# -- MCP service
mcp:
  enabled: true
  replicaCount: 1
  port: 3001
  resources:
    requests:
      cpu: 50m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi
  nodeSelector: {}
  tolerations: []
  affinity: {}
  podAnnotations: {}
  env:
    MCP_TRANSPORT: streamable-http
    MCP_AUTO_REGISTER: "true"
    MCP_EXPOSE_FILESYSTEM: "false"
    MCP_RATE_LIMIT_PER_TOOL: "30"
    MCP_LOG_LEVEL: info

# -- Dashboard (nginx serving static SPA)
dashboard:
  enabled: true
  replicaCount: 1
  port: 80
  resources:
    requests:
      cpu: 10m
      memory: 32Mi
    limits:
      cpu: 100m
      memory: 64Mi
  nodeSelector: {}
  tolerations: []
  affinity: {}
  podAnnotations: {}

# -- Config (non-secret env vars for core)
config:
  nodeEnv: production
  secureyeomanHost: "0.0.0.0"

# -- External managed database
database:
  host: postgres
  port: 5432
  name: friday
  user: friday
  # password is in secrets

# -- Secrets (base64-encoded values; use sealed-secrets or external-secrets in production)
secrets:
  postgresPassword: ""
  githubOauthClientId: ""
  githubOauthClientSecret: ""
  googleOauthClientId: ""
  googleOauthClientSecret: ""
  gmailOauthClientId: ""
  gmailOauthClientSecret: ""
  # Annotations for sealed-secrets or external-secrets-operator
  annotations: {}

# -- Ingress
ingress:
  enabled: false
  className: nginx
  annotations: {}
  hosts:
    - host: friday.local
      paths:
        - path: /
          pathType: Prefix
          service: dashboard
        - path: /api
          pathType: Prefix
          service: core
        - path: /ws
          pathType: Prefix
          service: core
        - path: /health
          pathType: Prefix
          service: core
        - path: /metrics
          pathType: Prefix
          service: core
  tls: []

# -- Autoscaling
autoscaling:
  enabled: false
  core:
    minReplicas: 2
    maxReplicas: 10
    targetCPUUtilizationPercentage: 70
  mcp:
    minReplicas: 1
    maxReplicas: 5
    targetCPUUtilizationPercentage: 70

# -- Pod disruption budgets
podDisruptionBudget:
  enabled: false
  core:
    minAvailable: 1
  mcp:
    minAvailable: 1
  dashboard:
    minAvailable: 1

# -- Network policies
networkPolicy:
  enabled: false

# -- Monitoring (Prometheus Operator CRDs)
monitoring:
  enabled: false
  alerts:
    enabled: false
  grafana:
    enabled: false

# -- External Secrets Operator
externalSecrets:
  enabled: false
  provider: aws  # aws | gcp | azure
  # AWS Secrets Manager
  aws:
    region: us-east-1
    secretName: friday/production
  # GCP Secret Manager
  gcp:
    projectId: ""
    secretName: friday-production
  # Azure Key Vault
  azure:
    vaultUrl: ""
    tenantId: ""
